# Data Model: Phase One â€“ Todo App

## Entities

### User (Better-Auth)

Represents a registered user of the application. Authentication is managed by the **better-auth** library.

**Attributes**:

-   **`id`**:
    -   Type: TEXT (UUID-like string)
    -   Constraints: Primary Key, Required, Unique
    -   Description: A unique identifier for the user (generated by better-auth).
    -   Note: Changed from INTEGER to TEXT for OAuth compatibility
-   **`name`**:
    -   Type: TEXT
    -   Constraints: Required
    -   Description: The full name of the user.
-   **`email`**:
    -   Type: TEXT
    -   Constraints: Required, Unique
    -   Description: The user's email address, used for login and OAuth.
-   **`emailVerified`**:
    -   Type: BOOLEAN
    -   Constraints: Default: false
    -   Description: Whether the user's email has been verified.
-   **`image`**:
    -   Type: TEXT
    -   Constraints: Optional
    -   Description: User avatar URL (populated from OAuth providers like GitHub).
-   **`createdAt`**:
    -   Type: TIMESTAMP WITH TIME ZONE
    -   Constraints: Auto-generated on creation, Required
    -   Description: The timestamp when the user account was created.
-   **`updatedAt`**:
    -   Type: TIMESTAMP WITH TIME ZONE
    -   Constraints: Auto-generated/updated on modification, Required
    -   Description: The timestamp when the user account was last modified.

**Authentication Methods**:
- Email/Password (hashed in `account` table)
- GitHub OAuth (stored in `account` table with tokens)

**Related Tables** (managed by better-auth):
- `session` - User sessions with tokens
- `account` - Passwords and OAuth tokens
- `verification` - Email verification codes

### Todo

Represents a single task in the application.

**Attributes**:

-   **`id`**:
    -   Type: UUID (Universally Unique Identifier)
    -   Constraints: Primary Key, Required, Unique
    -   Description: A unique identifier for each todo item.
-   **`title`**:
    -   Type: Text
    -   Constraints: Required, Max Length (e.g., 255 characters) - *[NEEDS CLARIFICATION: exact max length for title]*
    -   Description: The main name or brief description of the todo item.
-   **`description`**:
    -   Type: Text
    -   Constraints: Optional
    -   Description: A more detailed explanation of the todo item.
-   **`user_id`**:
    -   Type: TEXT
    -   Constraints: Required, Foreign Key references user(id)
    -   Description: The ID of the user who owns this todo (links to better-auth user).
-   **`completed`**:
    -   Type: Boolean
    -   Constraints: Required, Default: `false`
    -   Description: Indicates whether the todo item has been completed.
-   **`created_at`**:
    -   Type: Timestamp
    -   Constraints: Auto-generated on creation, Required
    -   Description: The timestamp when the todo item was first created.
-   **`updated_at`**:
    -   Type: Timestamp
    -   Constraints: Auto-generated/updated on modification, Required
    -   Description: The timestamp when the todo item was last modified.

## Relationships

-   **Todo belongs to User**: Each Todo item is linked to a User via the `user_id` foreign key (TEXT format).
-   **User has many Todos**: A single user can have multiple todo items.
-   **Cascade Delete**: When a user is deleted, all their todos are automatically deleted (ON DELETE CASCADE).

**Better-Auth Session Tables**:
-   **User has many Sessions**: A user can have multiple active sessions.
-   **User has many Accounts**: A user can link multiple OAuth providers (GitHub + email/password).

## Validation Rules

-   `title` must not be empty.
-   `completed` must be a boolean value.
